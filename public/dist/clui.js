var clui=function(t){"use strict";function e(){}function n(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(n)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e}let c,a=!1;function h(t,e,n,r){for(;t<e;){const s=t+(e-t>>1);n(s)<=r?t=s+1:e=s}return t}function l(t,e){a?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let s=0;for(let t=0;t<e.length;t++){const i=h(1,s+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;r[t]=n[i]+1;const o=i+1;n[o]=t,s=Math.max(o,s)}const i=[],o=[];let c=e.length-1;for(let t=n[s]+1;0!=t;t=r[t-1]){for(i.push(e[t-1]);c>=t;c--)o.push(e[c]);c--}for(;c>=0;c--)o.push(e[c]);i.reverse(),o.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<o.length;e++){for(;n<i.length&&o[e].claim_order>=i[n].claim_order;)n++;const r=n<i.length?i[n]:null;t.insertBefore(o[e],r)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function u(t,e,n){a&&!n?l(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t){const e={};for(const n of t)e[n.name]=n.value;return e}function M(t){c=t}const _=[],b=[],w=[],$=[],k=Promise.resolve();let L=!1;function C(t){w.push(t)}let E=!1;const S=new Set;function A(){if(!E){E=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];M(e),I(e.$$)}for(M(null),_.length=0;b.length;)b.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];S.has(e)||(S.add(e),e())}w.length=0}while(_.length);for(;$.length;)$.pop()();L=!1,E=!1,S.clear()}}function I(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const O=new Set;function F(t,e){-1===t.$$.dirty[0]&&(_.push(t),L||(L=!0,k.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(t,o,h,l,u,f,p=[-1]){const g=c;M(t);const m=t.$$={fragment:null,ctx:null,props:f,update:e,not_equal:u,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(g?g.$$.context:o.context||[]),callbacks:r(),dirty:p,skip_bound:!1};let y=!1;if(m.ctx=h?h(t,o.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return m.ctx&&u(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),y&&F(t,e)),n})):[],m.update(),y=!0,s(m.before_update),m.fragment=!!l&&l(m.ctx),o.target){if(o.hydrate){a=!0;const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();o.intro&&((x=t.$$.fragment)&&x.i&&(O.delete(x),x.i(v))),function(t,e,r,o){const{fragment:c,on_mount:a,on_destroy:h,after_update:l}=t.$$;c&&c.m(e,r),o||C((()=>{const e=a.map(n).filter(i);h?h.push(...e):s(e),t.$$.on_mount=[]})),l.forEach(C)}(t,o.target,o.anchor,o.customElement),a=!1,A()}var x,v;M(g)}let R;"function"==typeof HTMLElement&&(R=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var N=[{name:"git",description:"a simple git cli [test]",type:"cmd",children:[{name:"push",description:"push local changes to git remote [test]",type:"arg",children:[{name:"remote",description:"the name of the remote to push changes to",required:!0,type:"string",mode:"arg"},{name:"branch",description:"the name of the branch to push changes to",required:!0,type:"string",mode:"arg"},{name:"force",description:"forces the push of unrelated histories",type:"boolean",mode:"opt"}],run:(t,e)=>{t.done(!0)}}]},{name:"npm"},{name:"node"}];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function q(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))}const z=t=>{if((t=new Ft(t,!1)).children&&"cmd"===t.type){let e=[];for(let n of t.children)e.push(z(n));t.children=e}else if(t.children&&"arg"===t.type){let e=[];for(let n of t.children)e.push(new jt(n));t.children=e}return t};class P extends Array{}function B(t,e){const n=new P;let r=0;const s=()=>t.charAt(r),i=()=>t.charAt(r++),o=()=>""===s(),c=t=>{throw t},a=t=>/[a-z_]/i.test(t),h=t=>"-".indexOf(t)>=0,l=t=>"\"'".indexOf(t)>=0,u=t=>/[0-9]/.test(t),d=(t,r)=>{const{type:s,val:i}=Object.assign({},t);e&&void 0!==e.start?(void 0===e.end&&(e.end=e.start),n.push({type:s,val:i,cursor:r-i.length<=e.end&&r>=e.start})):n.push({type:s,val:i})},f=t=>{let e="";for(;!o()&&t(s());)e+=i();return e};for(;!o();){const t=i();if(" "!==t)if(a(t)){const e=t+f(a);"true false".indexOf(e)>=0?d({type:"boolean",val:Boolean(e)},r):d({type:"cmd",val:e},r)}else if(h(t)){const e=t+f(h);1===e.length?d({type:"opt",val:i()},r):2===e.length?d({type:"opt",val:f(a)},r):c(Error('too many recurring "-" in flag'))}else if(l(t))d({type:"string",val:f((e=>e!==t))},r),i();else if(u(t)){let e=!1;const n=t+f((t=>"."===t?(e&&c(Error('too many recurring "." in number')),e=!0,!0):u(t)));d({type:"number",val:Number(n)},r)}}return n}function K(t,e){var n;let r=[];if(t instanceof Rt&&(t=new Ft({name:"h",type:"cmd",children:null!==(n=t.commands)&&void 0!==n?n:[]})),t instanceof Ft){let n,s=t;for(let t=0;t<e.length;t++){let i=e[t];if(!(s instanceof Ft&&s.type&&void 0!==s.children))return r;if("cmd"===s.type){let n=s.children.find((t=>t.name===i.val));if(!n)return r.push(...e.slice(t).map((t=>Object.assign(Object.assign({},t),{unknown:!0})))),r;s=n,r.push(s)}else"arg"===s.type&&(void 0===n&&(n=t),r.push(new jt(Object.assign(Object.assign({},s.children[t-n]),{value:"opt"===i.type||i.val}))))}return r}throw new Error("Invalid root type (root has to be a Command)")}function T(t,e){var n;if("string"==typeof e&&(e=K(t,B(e))),t instanceof Rt&&(t=new Ft({name:"h",type:"cmd",children:null!==(n=t.commands)&&void 0!==n?n:[]})),!(e[0]instanceof Ft||t instanceof Ft))return new Promise(((t,e)=>t({success:!1,output:"Error: Command not found"})));{let n=e.filter((t=>t instanceof Ft));const r=n.length>0?n[n.length-1]:t;let s=e.filter((t=>t instanceof jt));if(r){let t=!0;if("arg"===r.type&&void 0!==r.children){let e=r.children.filter((t=>t.required)).length;t=e===s.filter((t=>t.required)).length}return new Promise(((e,n)=>{t||e({success:!1,output:"Error: Missing required arguments"});const i={command:r,done:(t,...n)=>{e({success:t,output:n})}};r.run?r.run(i,s):e({success:!1,output:"Error: Command has no run function"})}))}}}function W(t){return Array.isArray?Array.isArray(t):"[object Array]"===G(t)}function H(t){return"string"==typeof t}function J(t){return"number"==typeof t}function U(t){return!0===t||!1===t||function(t){return V(t)&&null!==t}(t)&&"[object Boolean]"==G(t)}function V(t){return"object"==typeof t}function Q(t){return null!=t}function D(t){return!t.trim().length}function G(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const X=Object.prototype.hasOwnProperty;class Y{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=Z(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Z(t){let e=null,n=null,r=null,s=1;if(H(t)||W(t))r=t,e=tt(t),n=et(t);else{if(!X.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(r=i,X.call(t,"weight")&&(s=t.weight,s<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=tt(i),n=et(i)}return{path:e,id:n,weight:s,src:r}}function tt(t){return W(t)?t:t.split(".")}function et(t){return W(t)?t.join("."):t}var nt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const s=(t,e,i)=>{if(Q(t))if(e[i]){const o=t[e[i]];if(!Q(o))return;if(i===e.length-1&&(H(o)||J(o)||U(o)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if(W(o)){r=!0;for(let t=0,n=o.length;t<n;t+=1)s(o[t],e,i+1)}else e.length&&s(o,e,i+1)}else n.push(t)};return s(t,H(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const rt=/[^ ]+/g;class st{constructor({getFn:t=nt.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(rt).length;if(e.has(r))return e.get(r);const s=1/Math.sqrt(r),i=parseFloat(Math.round(s*n)/n);return e.set(r,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,H(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();H(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Q(t)||D(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let s=this.getFn(t,e.path);if(Q(s))if(W(s)){let t=[];const e=[{nestedArrIndex:-1,value:s}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(Q(r))if(H(r)&&!D(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else W(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!D(s)){let t={v:s,n:this.norm.get(s)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function it(t,e,{getFn:n=nt.getFn}={}){const r=new st({getFn:n});return r.setKeys(t.map(Z)),r.setSources(e),r.create(),r}function ot(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=nt.distance,ignoreLocation:i=nt.ignoreLocation}={}){const o=e/t.length;if(i)return o;const c=Math.abs(r-n);return s?o+c/s:c?1:o}const ct=32;function at(t,e,n,{location:r=nt.location,distance:s=nt.distance,threshold:i=nt.threshold,findAllMatches:o=nt.findAllMatches,minMatchCharLength:c=nt.minMatchCharLength,includeMatches:a=nt.includeMatches,ignoreLocation:h=nt.ignoreLocation}={}){if(e.length>ct)throw new Error(`Pattern length exceeds max of ${ct}.`);const l=e.length,u=t.length,d=Math.max(0,Math.min(r,u));let f=i,p=d;const g=c>1||a,m=g?Array(u):[];let y;for(;(y=t.indexOf(e,p))>-1;){let t=ot(e,{currentLocation:y,expectedLocation:d,distance:s,ignoreLocation:h});if(f=Math.min(t,f),p=y+l,g){let t=0;for(;t<l;)m[y+t]=1,t+=1}}p=-1;let x=[],v=1,M=l+u;const _=1<<l-1;for(let r=0;r<l;r+=1){let i=0,c=M;for(;i<c;){ot(e,{errors:r,currentLocation:d+c,expectedLocation:d,distance:s,ignoreLocation:h})<=f?i=c:M=c,c=Math.floor((M-i)/2+i)}M=c;let a=Math.max(1,d-c+1),y=o?u:Math.min(d+c,u)+l,b=Array(y+2);b[y+1]=(1<<r)-1;for(let i=y;i>=a;i-=1){let o=i-1,c=n[t.charAt(o)];if(g&&(m[o]=+!!c),b[i]=(b[i+1]<<1|1)&c,r&&(b[i]|=(x[i+1]|x[i])<<1|1|x[i+1]),b[i]&_&&(v=ot(e,{errors:r,currentLocation:o,expectedLocation:d,distance:s,ignoreLocation:h}),v<=f)){if(f=v,p=o,p<=d)break;a=Math.max(1,2*d-p)}}if(ot(e,{errors:r+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:h})>f)break;x=b}const b={isMatch:p>=0,score:Math.max(.001,v)};if(g){const t=function(t=[],e=nt.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let o=t[i];o&&-1===r?r=i:o||-1===r||(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(m,c);t.length?a&&(b.indices=t):b.isMatch=!1}return b}function ht(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class lt{constructor(t,{location:e=nt.location,threshold:n=nt.threshold,distance:r=nt.distance,includeMatches:s=nt.includeMatches,findAllMatches:i=nt.findAllMatches,minMatchCharLength:o=nt.minMatchCharLength,isCaseSensitive:c=nt.isCaseSensitive,ignoreLocation:a=nt.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:a},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(t,e)=>{this.chunks.push({pattern:t,alphabet:ht(t),startIndex:e})},l=this.pattern.length;if(l>ct){let t=0;const e=l%ct,n=l-e;for(;t<n;)h(this.pattern.substr(t,ct),t),t+=ct;if(e){const t=l-ct;h(this.pattern.substr(t),t)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:c,ignoreLocation:a}=this.options;let h=[],l=0,u=!1;this.chunks.forEach((({pattern:e,alphabet:d,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=at(t,e,d,{location:r+f,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:a});p&&(u=!0),l+=g,p&&m&&(h=[...h,...m])}));let d={isMatch:u,score:u?l/this.chunks.length:1};return u&&n&&(d.indices=h),d}}class ut{constructor(t){this.pattern=t}static isMultiMatch(t){return dt(t,this.multiRegex)}static isSingleMatch(t){return dt(t,this.singleRegex)}search(){}}function dt(t,e){const n=t.match(e);return n?n[1]:null}class ft extends ut{constructor(t,{location:e=nt.location,threshold:n=nt.threshold,distance:r=nt.distance,includeMatches:s=nt.includeMatches,findAllMatches:i=nt.findAllMatches,minMatchCharLength:o=nt.minMatchCharLength,isCaseSensitive:c=nt.isCaseSensitive,ignoreLocation:a=nt.ignoreLocation}={}){super(t),this._bitapSearch=new lt(t,{location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class pt extends ut{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],s=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+s,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const gt=[class extends ut{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},pt,class extends ut{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends ut{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends ut{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends ut{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends ut{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},ft],mt=gt.length,yt=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const xt=new Set([ft.type,pt.type]);class vt{constructor(t,{isCaseSensitive:e=nt.isCaseSensitive,includeMatches:n=nt.includeMatches,minMatchCharLength:r=nt.minMatchCharLength,ignoreLocation:s=nt.ignoreLocation,findAllMatches:i=nt.findAllMatches,location:o=nt.location,threshold:c=nt.threshold,distance:a=nt.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:s,location:o,threshold:c,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(yt).filter((t=>t&&!!t.trim())),r=[];for(let t=0,s=n.length;t<s;t+=1){const s=n[t];let i=!1,o=-1;for(;!i&&++o<mt;){const t=gt[o];let n=t.isMultiMatch(s);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(o=-1;++o<mt;){const t=gt[o];let n=t.isSingleMatch(s);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let s=0,i=[],o=0;for(let r=0,c=e.length;r<c;r+=1){const c=e[r];i.length=0,s=0;for(let e=0,r=c.length;e<r;e+=1){const r=c[e],{isMatch:a,indices:h,score:l}=r.search(t);if(!a){o=0,s=0,i.length=0;break}if(s+=1,o+=l,n){const t=r.constructor.type;xt.has(t)?i=[...i,...h]:i.push(h)}}if(s){let t={isMatch:!0,score:o/s};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const Mt=[];function _t(t,e){for(let n=0,r=Mt.length;n<r;n+=1){let r=Mt[n];if(r.condition(t,e))return new r(t,e)}return new lt(t,e)}const bt="$and",wt="$or",$t="$path",kt="$val",Lt=t=>!(!t[bt]&&!t[wt]),Ct=t=>({[bt]:Object.keys(t).map((e=>({[e]:t[e]})))});function Et(t,e,{auto:n=!0}={}){const r=t=>{let s=Object.keys(t);const i=(t=>!!t[$t])(t);if(!i&&s.length>1&&!Lt(t))return r(Ct(t));if((t=>!W(t)&&V(t)&&!Lt(t))(t)){const r=i?t[$t]:s[0],o=i?t[kt]:t[r];if(!H(o))throw new Error((t=>`Invalid value for key ${t}`)(r));const c={keyId:et(r),pattern:o};return n&&(c.searcher=_t(o,e)),c}let o={children:[],operator:s[0]};return s.forEach((e=>{const n=t[e];W(n)&&n.forEach((t=>{o.children.push(r(t))}))})),o};return Lt(t)||(t=Ct(t)),r(t)}function St(t,e){const n=t.matches;e.matches=[],Q(n)&&n.forEach((t=>{if(!Q(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let s={indices:n,value:r};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)}))}function At(t,e){e.score=t.score}class It{constructor(t,e={},n){this.options={...nt,...e},this.options.useExtendedSearch,this._keyStore=new Y(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof st))throw new Error("Incorrect 'index' type");this._myIndex=e||it(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){Q(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,r-=1,e.push(s))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:s,sortFn:i,ignoreFieldNorm:o}=this.options;let c=H(t)?H(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=nt.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:s})=>{const i=t?t.weight:null;n*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(e?1:r))})),t.score=n}))}(c,{ignoreFieldNorm:o}),s&&c.sort(i),J(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=nt.includeMatches,includeScore:r=nt.includeScore}={}){const s=[];return n&&s.push(St),r&&s.push(At),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return s.length&&s.forEach((e=>{e(t,r)})),r}))}(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=_t(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:s})=>{if(!Q(t))return;const{isMatch:i,score:o,indices:c}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:o,value:t,norm:s,indices:c}]})})),r}_searchLogical(t){const e=Et(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:s}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:s});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}switch(t.operator){case bt:{const s=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,r);if(!c.length)return[];s.push(...c)}return s}case wt:{const s=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,r);if(c.length){s.push(...c);break}}return s}}},r=this._myIndex.records,s={},i=[];return r.forEach((({$:t,i:r})=>{if(Q(t)){let o=n(e,t,r);o.length&&(s[r]||(s[r]={idx:r,item:t,matches:[]},i.push(s[r])),o.forEach((({matches:t})=>{s[r].matches.push(...t)})))}})),i}_searchObjectList(t){const e=_t(t,this.options),{keys:n,records:r}=this._myIndex,s=[];return r.forEach((({$:t,i:r})=>{if(!Q(t))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),i.length&&s.push({idx:r,item:t,matches:i})})),s}_findMatches({key:t,value:e,searcher:n}){if(!Q(e))return[];let r=[];if(W(e))e.forEach((({v:e,i:s,n:i})=>{if(!Q(e))return;const{isMatch:o,score:c,indices:a}=n.searchIn(e);o&&r.push({score:c,key:t,value:e,idx:s,norm:i,indices:a})}));else{const{v:s,n:i}=e,{isMatch:o,score:c,indices:a}=n.searchIn(s);o&&r.push({score:c,key:t,value:s,norm:i,indices:a})}return r}}function Ot(t,e){let n;if(t instanceof Rt)return t.fuse.search(e).map((t=>t.item));n="cmd"===t.type&&t.children?t.children:[];const r=t=>{let e=[];for(let n of t)e.push(n),"cmd"===n.type&&n.children&&(e=e.concat(r(n.children)));return e};let s=r(n);return new It(s,{keys:["name","description"]}).search(e).map((t=>t.item))}It.version="6.4.6",It.createIndex=it,It.parseIndex=function(t,{getFn:e=nt.getFn}={}){const{keys:n,records:r}=t,s=new st({getFn:e});return s.setKeys(n),s.setIndexRecords(r),s},It.config=nt,It.parseQuery=Et,function(...t){Mt.push(...t)}(vt);class Ft{constructor(t,e=!0){e&&(t=z(t)),Object.keys(t).forEach((e=>{this[e]=t[e]}))}}class jt{constructor(t){this.name=t.name,this.description=t.description,this.type=t.type,this.mode=t.mode,this.required=t.required,this.value=t.value}}class Rt{constructor(){this.parse=B,this.match=K,this.run=T,this.search=Ot,this.parseMatch=(t,e)=>K(null!=e?e:this,B(t)),this.commands=[],this.fuse=new It(this.commands),this.updateFuse=()=>{const t=e=>{let n=[];for(let r of e)n.push(r),"cmd"===r.type&&r.children&&(n=n.concat(t(r.children)));return n};let e=t(this.commands);this.fuse=new It(e,{keys:["name","description"]})}}load(...t){for(let e of t)this.commands.push(new Ft(e));this.updateFuse()}loadURL(t){return q(this,void 0,void 0,(function*(){const e=(yield import(t)).default;if(Array.isArray(e))for(let t of e)this.commands.push(t);else this.commands.push(e);this.updateFuse()}))}getLastCommand(t){for(let e=t.length-1;e>=0;e--)if(t[e]instanceof Ft)return t[e]}stateful(t){var e;return void 0===t&&(t=new Ft({name:"h",type:"cmd",children:null!==(e=this.commands)&&void 0!==e?e:[]})),{parse:B,match:e=>K(t,e),run:e=>T(t,e),search:e=>Ot(t,e)}}}function Nt(t,e,n){const r=t.slice();return r[10]=e[n],r[12]=n,r}function qt(t){let e,n,r,s,i,o,c,a,h,v,M=t[10].name+"",_=(t[10].description??"")+"";function b(){return t[6](t[12])}return{c(){e=f("div"),n=f("span"),r=p(M),s=g(),i=f("span"),o=p(_),c=g(),y(n,"class","item-name"),y(i,"class","item-description"),y(e,"class",a="dropdown-item "+(t[12]===t[1]?"selected":""))},m(t,a){u(t,e,a),l(e,n),l(n,r),l(e,s),l(e,i),l(i,o),l(e,c),h||(v=m(e,"mouseover",b),h=!0)},p(n,s){t=n,1&s&&M!==(M=t[10].name+"")&&x(r,M),1&s&&_!==(_=(t[10].description??"")+"")&&x(o,_),2&s&&a!==(a="dropdown-item "+(t[12]===t[1]?"selected":""))&&y(e,"class",a)},d(t){t&&d(e),h=!1,v()}}}function zt(t){let n,r,i,o,c,a,h,p,x,v,M=t[0],_=[];for(let e=0;e<M.length;e+=1)_[e]=qt(Nt(t,M,e));return{c(){n=f("div"),r=f("div"),i=f("div"),o=f("input"),c=g(),a=f("div");for(let t=0;t<_.length;t+=1)_[t].c();h=g(),p=f("div"),this.c=e,y(o,"type","text"),y(o,"placeholder","Enter a command"),y(i,"class","input"),y(a,"class","dropdown"),y(p,"class","form"),y(r,"class","cli"),y(n,"id","clui-fragment")},m(e,s){u(e,n,s),l(n,r),l(r,i),l(i,o),l(r,c),l(r,a);for(let t=0;t<_.length;t+=1)_[t].m(a,null);l(r,h),l(r,p),x||(v=[m(o,"keyup",t[3]),m(o,"focus",t[4]),m(o,"blur",t[5])],x=!0)},p(t,[e]){if(3&e){let n;for(M=t[0],n=0;n<M.length;n+=1){const r=Nt(t,M,n);_[n]?_[n].p(r,e):(_[n]=qt(r),_[n].c(),_[n].m(a,null))}for(;n<_.length;n+=1)_[n].d(1);_.length=M.length}},i:e,o:e,d(t){t&&d(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(_,t),x=!1,s(v)}}}function Pt(t,e,n){const r=new Rt;window.clui=r,r.load(...N);const s=r.stateful();let i=[],o=0,c=!1;return[i,o,c,t=>{var e;const o=null===(e=t.target)||void 0===e?void 0:e.value;n(0,i=o?s.search(o):c?r.commands:[])},()=>n(2,c=!0),()=>n(2,c=!1),t=>n(1,o=t)]}class Bt extends R{constructor(t){super(),this.shadowRoot.innerHTML="<style>#clui-fragment,#clui-fragment *{box-sizing:border-box}#clui-fragment{--dark:hsl(225, 32%, 13%);--darker:hsl(225, 35%, 9%);--darkest:hsl(225, 38%, 6%);--light:hsl(225, 35%, 36%);--medium:hsl(225, 31%, 18%);--text-light:hsl(225, 54%, 89%);--text-medium:hsl(225, 33%, 64%);background-color:var(--darkest);color:var(--text-medium);font-size:1.3rem;font-family:Calibri, sans-serif}#clui-fragment{display:flex;flex-direction:column;align-items:center;margin:0 auto}.input{position:relative;display:flex;align-items:center;border:2px solid var(--medium);border-radius:3px 3px 0 0;background-color:var(--dark)}.input>input{position:relative;z-index:1;flex:1;padding:0.6rem 0.4rem;outline:none;border:none;background-color:transparent;color:var(--text-light);font-size:inherit;font-family:Calibri, sans-serif}.dropdown{overflow-y:auto;min-width:40vw;max-width:60vw;max-height:40vh;border-radius:0 0 3px 3px;background-color:var(--darker)}.dropdown-item{position:relative;z-index:1;padding:0.6rem 1.2rem;padding-left:2.2rem;border-radius:3px;background-color:var(--darker)}.dropdown-item.selected{outline:2px solid var(--light);outline-offset:-2px;background-color:var(--light);background-color:var(--medium);color:var(--text-light);cursor:pointer}.item-name{margin-right:0.3rem;margin-left:-0.5rem;padding:0.3rem 0.5rem;border:2px solid var(--light);border-radius:3px}.selected>.item-name{background-color:var(--light)}</style>",j(this,{target:this.shadowRoot,props:v(this.attributes),customElement:!0},Pt,zt,o,{}),t&&t.target&&u(t.target,this,t.anchor)}}return customElements.define("clui-main",Bt),t.Clui=Bt,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=clui.js.map
