var clui=function(t){"use strict";function e(){}function n(t){return t()}function r(){return Object.create(null)}function s(t){t.forEach(n)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e}let c,a=!1;function h(t,e,n,r){for(;t<e;){const s=t+(e-t>>1);n(s)<=r?t=s+1:e=s}return t}function l(t,e){a?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let s=0;for(let t=0;t<e.length;t++){const i=h(1,s+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;r[t]=n[i]+1;const o=i+1;n[o]=t,s=Math.max(o,s)}const i=[],o=[];let c=e.length-1;for(let t=n[s]+1;0!=t;t=r[t-1]){for(i.push(e[t-1]);c>=t;c--)o.push(e[c]);c--}for(;c>=0;c--)o.push(e[c]);i.reverse(),o.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<o.length;e++){for(;n<i.length&&o[e].claim_order>=i[n].claim_order;)n++;const r=n<i.length?i[n]:null;t.insertBefore(o[e],r)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function u(t,e,n){a&&!n?l(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function M(t){const e={};for(const n of t)e[n.name]=n.value;return e}function b(t){c=t}const _=[],w=[],$=[],k=[],L=Promise.resolve();let C=!1;function E(t){$.push(t)}let S=!1;const A=new Set;function I(){if(!S){S=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];b(e),O(e.$$)}for(b(null),_.length=0;w.length;)w.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];A.has(e)||(A.add(e),e())}$.length=0}while(_.length);for(;k.length;)k.pop()();C=!1,S=!1,A.clear()}}function O(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const j=new Set;function F(t,e){-1===t.$$.dirty[0]&&(_.push(t),C||(C=!0,L.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(t,o,h,l,u,f,p=[-1]){const g=c;b(t);const m=t.$$={fragment:null,ctx:null,props:f,update:e,not_equal:u,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(g?g.$$.context:o.context||[]),callbacks:r(),dirty:p,skip_bound:!1};let y=!1;if(m.ctx=h?h(t,o.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return m.ctx&&u(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),y&&F(t,e)),n})):[],m.update(),y=!0,s(m.before_update),m.fragment=!!l&&l(m.ctx),o.target){if(o.hydrate){a=!0;const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();o.intro&&((x=t.$$.fragment)&&x.i&&(j.delete(x),x.i(v))),function(t,e,r,o){const{fragment:c,on_mount:a,on_destroy:h,after_update:l}=t.$$;c&&c.m(e,r),o||E((()=>{const e=a.map(n).filter(i);h?h.push(...e):s(e),t.$$.on_mount=[]})),l.forEach(E)}(t,o.target,o.anchor,o.customElement),a=!1,I()}var x,v;b(g)}let N;"function"==typeof HTMLElement&&(N=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var q=[{name:"git",description:"a simple git cli [test]",type:"cmd",children:[{name:"push",description:"push local changes to git remote [test]",type:"arg",children:[{name:"remote",description:"the name of the remote to push changes to",required:!0,type:"string",mode:"arg"},{name:"branch",description:"the name of the branch to push changes to",required:!0,type:"string",mode:"arg"},{name:"force",description:"forces the push of unrelated histories",type:"boolean",mode:"opt"}],run:(t,e)=>{t.done(!0)}}]},{name:"npm"},{name:"node"}];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function z(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}a((r=r.apply(t,e||[])).next())}))}const P=t=>{if((t=new Ft(t,!1)).children&&"cmd"===t.type){let e=[];for(let n of t.children)e.push(P(n));t.children=e}else if(t.children&&"arg"===t.type){let e=[];for(let n of t.children)e.push(new Rt(n));t.children=e}return t};class B extends Array{}function K(t,e){const n=new B;let r=0;const s=()=>t.charAt(r),i=()=>t.charAt(r++),o=()=>""===s(),c=t=>{throw t},a=t=>/[a-z_]/i.test(t),h=t=>"-".indexOf(t)>=0,l=t=>"\"'".indexOf(t)>=0,u=t=>/[0-9]/.test(t),d=(t,r)=>{const{type:s,val:i}=Object.assign({},t);e&&void 0!==e.start?(void 0===e.end&&(e.end=e.start),n.push({type:s,val:i,cursor:r-i.length<=e.end&&r>=e.start})):n.push({type:s,val:i})},f=t=>{let e="";for(;!o()&&t(s());)e+=i();return e};for(;!o();){const t=i();if(" "!==t)if(a(t)){const e=t+f(a);"true false".indexOf(e)>=0?d({type:"boolean",val:Boolean(e)},r):d({type:"cmd",val:e},r)}else if(h(t)){const e=t+f(h);1===e.length?d({type:"opt",val:i()},r):2===e.length?d({type:"opt",val:f(a)},r):c(Error('too many recurring "-" in flag'))}else if(l(t))d({type:"string",val:f((e=>e!==t))},r),i();else if(u(t)){let e=!1;const n=t+f((t=>"."===t?(e&&c(Error('too many recurring "." in number')),e=!0,!0):u(t)));d({type:"number",val:Number(n)},r)}}return n}function T(t,e){var n;let r=[];if(t instanceof Nt&&(t=new Ft({name:"h",type:"cmd",children:null!==(n=t.commands)&&void 0!==n?n:[]})),t instanceof Ft){let n,s=t;for(let t=0;t<e.length;t++){let i=e[t];if(!(s instanceof Ft&&s.type&&void 0!==s.children))return r;if("cmd"===s.type){let n=s.children.find((t=>t.name===i.val));if(!n)return r.push(...e.slice(t).map((t=>Object.assign(Object.assign({},t),{unknown:!0})))),r;s=n,r.push(s)}else"arg"===s.type&&(void 0===n&&(n=t),r.push(new Rt(Object.assign(Object.assign({},s.children[t-n]),{value:"opt"===i.type||i.val}))))}return r}throw new Error("Invalid root type (root has to be a Command)")}function W(t,e){var n;if("string"==typeof e&&(e=T(t,K(e))),t instanceof Nt&&(t=new Ft({name:"h",type:"cmd",children:null!==(n=t.commands)&&void 0!==n?n:[]})),!(e[0]instanceof Ft||t instanceof Ft))return new Promise(((t,e)=>t({success:!1,output:"Error: Command not found"})));{let n=e.filter((t=>t instanceof Ft));const r=n.length>0?n[n.length-1]:t;let s=e.filter((t=>t instanceof Rt));if(r){let t=!0;if("arg"===r.type&&void 0!==r.children){let e=r.children.filter((t=>t.required)).length;t=e===s.filter((t=>t.required)).length}return new Promise(((e,n)=>{t||e({success:!1,output:"Error: Missing required arguments"});const i={command:r,done:(t,...n)=>{e({success:t,output:n})}};r.run?r.run(i,s):e({success:!1,output:"Error: Command has no run function"})}))}}}function H(t){return Array.isArray?Array.isArray(t):"[object Array]"===X(t)}function J(t){return"string"==typeof t}function U(t){return"number"==typeof t}function V(t){return!0===t||!1===t||function(t){return Q(t)&&null!==t}(t)&&"[object Boolean]"==X(t)}function Q(t){return"object"==typeof t}function D(t){return null!=t}function G(t){return!t.trim().length}function X(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Y=Object.prototype.hasOwnProperty;class Z{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=tt(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function tt(t){let e=null,n=null,r=null,s=1;if(J(t)||H(t))r=t,e=et(t),n=nt(t);else{if(!Y.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(r=i,Y.call(t,"weight")&&(s=t.weight,s<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=et(i),n=nt(i)}return{path:e,id:n,weight:s,src:r}}function et(t){return H(t)?t:t.split(".")}function nt(t){return H(t)?t.join("."):t}var rt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const s=(t,e,i)=>{if(D(t))if(e[i]){const o=t[e[i]];if(!D(o))return;if(i===e.length-1&&(J(o)||U(o)||V(o)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if(H(o)){r=!0;for(let t=0,n=o.length;t<n;t+=1)s(o[t],e,i+1)}else e.length&&s(o,e,i+1)}else n.push(t)};return s(t,J(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const st=/[^ ]+/g;class it{constructor({getFn:t=rt.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(st).length;if(e.has(r))return e.get(r);const s=1/Math.sqrt(r),i=parseFloat(Math.round(s*n)/n);return e.set(r,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,J(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();J(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!D(t)||G(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let s=this.getFn(t,e.path);if(D(s))if(H(s)){let t=[];const e=[{nestedArrIndex:-1,value:s}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(D(r))if(J(r)&&!G(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else H(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!G(s)){let t={v:s,n:this.norm.get(s)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function ot(t,e,{getFn:n=rt.getFn}={}){const r=new it({getFn:n});return r.setKeys(t.map(tt)),r.setSources(e),r.create(),r}function ct(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=rt.distance,ignoreLocation:i=rt.ignoreLocation}={}){const o=e/t.length;if(i)return o;const c=Math.abs(r-n);return s?o+c/s:c?1:o}const at=32;function ht(t,e,n,{location:r=rt.location,distance:s=rt.distance,threshold:i=rt.threshold,findAllMatches:o=rt.findAllMatches,minMatchCharLength:c=rt.minMatchCharLength,includeMatches:a=rt.includeMatches,ignoreLocation:h=rt.ignoreLocation}={}){if(e.length>at)throw new Error(`Pattern length exceeds max of ${at}.`);const l=e.length,u=t.length,d=Math.max(0,Math.min(r,u));let f=i,p=d;const g=c>1||a,m=g?Array(u):[];let y;for(;(y=t.indexOf(e,p))>-1;){let t=ct(e,{currentLocation:y,expectedLocation:d,distance:s,ignoreLocation:h});if(f=Math.min(t,f),p=y+l,g){let t=0;for(;t<l;)m[y+t]=1,t+=1}}p=-1;let x=[],v=1,M=l+u;const b=1<<l-1;for(let r=0;r<l;r+=1){let i=0,c=M;for(;i<c;){ct(e,{errors:r,currentLocation:d+c,expectedLocation:d,distance:s,ignoreLocation:h})<=f?i=c:M=c,c=Math.floor((M-i)/2+i)}M=c;let a=Math.max(1,d-c+1),y=o?u:Math.min(d+c,u)+l,_=Array(y+2);_[y+1]=(1<<r)-1;for(let i=y;i>=a;i-=1){let o=i-1,c=n[t.charAt(o)];if(g&&(m[o]=+!!c),_[i]=(_[i+1]<<1|1)&c,r&&(_[i]|=(x[i+1]|x[i])<<1|1|x[i+1]),_[i]&b&&(v=ct(e,{errors:r,currentLocation:o,expectedLocation:d,distance:s,ignoreLocation:h}),v<=f)){if(f=v,p=o,p<=d)break;a=Math.max(1,2*d-p)}}if(ct(e,{errors:r+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:h})>f)break;x=_}const _={isMatch:p>=0,score:Math.max(.001,v)};if(g){const t=function(t=[],e=rt.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let o=t[i];o&&-1===r?r=i:o||-1===r||(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(m,c);t.length?a&&(_.indices=t):_.isMatch=!1}return _}function lt(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class ut{constructor(t,{location:e=rt.location,threshold:n=rt.threshold,distance:r=rt.distance,includeMatches:s=rt.includeMatches,findAllMatches:i=rt.findAllMatches,minMatchCharLength:o=rt.minMatchCharLength,isCaseSensitive:c=rt.isCaseSensitive,ignoreLocation:a=rt.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:a},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(t,e)=>{this.chunks.push({pattern:t,alphabet:lt(t),startIndex:e})},l=this.pattern.length;if(l>at){let t=0;const e=l%at,n=l-e;for(;t<n;)h(this.pattern.substr(t,at),t),t+=at;if(e){const t=l-at;h(this.pattern.substr(t),t)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:c,ignoreLocation:a}=this.options;let h=[],l=0,u=!1;this.chunks.forEach((({pattern:e,alphabet:d,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=ht(t,e,d,{location:r+f,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:a});p&&(u=!0),l+=g,p&&m&&(h=[...h,...m])}));let d={isMatch:u,score:u?l/this.chunks.length:1};return u&&n&&(d.indices=h),d}}class dt{constructor(t){this.pattern=t}static isMultiMatch(t){return ft(t,this.multiRegex)}static isSingleMatch(t){return ft(t,this.singleRegex)}search(){}}function ft(t,e){const n=t.match(e);return n?n[1]:null}class pt extends dt{constructor(t,{location:e=rt.location,threshold:n=rt.threshold,distance:r=rt.distance,includeMatches:s=rt.includeMatches,findAllMatches:i=rt.findAllMatches,minMatchCharLength:o=rt.minMatchCharLength,isCaseSensitive:c=rt.isCaseSensitive,ignoreLocation:a=rt.ignoreLocation}={}){super(t),this._bitapSearch=new ut(t,{location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class gt extends dt{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],s=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+s,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const mt=[class extends dt{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},gt,class extends dt{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends dt{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends dt{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends dt{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends dt{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},pt],yt=mt.length,xt=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const vt=new Set([pt.type,gt.type]);class Mt{constructor(t,{isCaseSensitive:e=rt.isCaseSensitive,includeMatches:n=rt.includeMatches,minMatchCharLength:r=rt.minMatchCharLength,ignoreLocation:s=rt.ignoreLocation,findAllMatches:i=rt.findAllMatches,location:o=rt.location,threshold:c=rt.threshold,distance:a=rt.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:s,location:o,threshold:c,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(xt).filter((t=>t&&!!t.trim())),r=[];for(let t=0,s=n.length;t<s;t+=1){const s=n[t];let i=!1,o=-1;for(;!i&&++o<yt;){const t=mt[o];let n=t.isMultiMatch(s);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(o=-1;++o<yt;){const t=mt[o];let n=t.isSingleMatch(s);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let s=0,i=[],o=0;for(let r=0,c=e.length;r<c;r+=1){const c=e[r];i.length=0,s=0;for(let e=0,r=c.length;e<r;e+=1){const r=c[e],{isMatch:a,indices:h,score:l}=r.search(t);if(!a){o=0,s=0,i.length=0;break}if(s+=1,o+=l,n){const t=r.constructor.type;vt.has(t)?i=[...i,...h]:i.push(h)}}if(s){let t={isMatch:!0,score:o/s};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const bt=[];function _t(t,e){for(let n=0,r=bt.length;n<r;n+=1){let r=bt[n];if(r.condition(t,e))return new r(t,e)}return new ut(t,e)}const wt="$and",$t="$or",kt="$path",Lt="$val",Ct=t=>!(!t[wt]&&!t[$t]),Et=t=>({[wt]:Object.keys(t).map((e=>({[e]:t[e]})))});function St(t,e,{auto:n=!0}={}){const r=t=>{let s=Object.keys(t);const i=(t=>!!t[kt])(t);if(!i&&s.length>1&&!Ct(t))return r(Et(t));if((t=>!H(t)&&Q(t)&&!Ct(t))(t)){const r=i?t[kt]:s[0],o=i?t[Lt]:t[r];if(!J(o))throw new Error((t=>`Invalid value for key ${t}`)(r));const c={keyId:nt(r),pattern:o};return n&&(c.searcher=_t(o,e)),c}let o={children:[],operator:s[0]};return s.forEach((e=>{const n=t[e];H(n)&&n.forEach((t=>{o.children.push(r(t))}))})),o};return Ct(t)||(t=Et(t)),r(t)}function At(t,e){const n=t.matches;e.matches=[],D(n)&&n.forEach((t=>{if(!D(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let s={indices:n,value:r};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)}))}function It(t,e){e.score=t.score}class Ot{constructor(t,e={},n){this.options={...rt,...e},this.options.useExtendedSearch,this._keyStore=new Z(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof it))throw new Error("Incorrect 'index' type");this._myIndex=e||ot(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){D(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,r-=1,e.push(s))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:s,sortFn:i,ignoreFieldNorm:o}=this.options;let c=J(t)?J(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=rt.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:s})=>{const i=t?t.weight:null;n*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(e?1:r))})),t.score=n}))}(c,{ignoreFieldNorm:o}),s&&c.sort(i),U(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=rt.includeMatches,includeScore:r=rt.includeScore}={}){const s=[];return n&&s.push(At),r&&s.push(It),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return s.length&&s.forEach((e=>{e(t,r)})),r}))}(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=_t(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:s})=>{if(!D(t))return;const{isMatch:i,score:o,indices:c}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:o,value:t,norm:s,indices:c}]})})),r}_searchLogical(t){const e=St(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:s}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:s});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}switch(t.operator){case wt:{const s=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,r);if(!c.length)return[];s.push(...c)}return s}case $t:{const s=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,r);if(c.length){s.push(...c);break}}return s}}},r=this._myIndex.records,s={},i=[];return r.forEach((({$:t,i:r})=>{if(D(t)){let o=n(e,t,r);o.length&&(s[r]||(s[r]={idx:r,item:t,matches:[]},i.push(s[r])),o.forEach((({matches:t})=>{s[r].matches.push(...t)})))}})),i}_searchObjectList(t){const e=_t(t,this.options),{keys:n,records:r}=this._myIndex,s=[];return r.forEach((({$:t,i:r})=>{if(!D(t))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),i.length&&s.push({idx:r,item:t,matches:i})})),s}_findMatches({key:t,value:e,searcher:n}){if(!D(e))return[];let r=[];if(H(e))e.forEach((({v:e,i:s,n:i})=>{if(!D(e))return;const{isMatch:o,score:c,indices:a}=n.searchIn(e);o&&r.push({score:c,key:t,value:e,idx:s,norm:i,indices:a})}));else{const{v:s,n:i}=e,{isMatch:o,score:c,indices:a}=n.searchIn(s);o&&r.push({score:c,key:t,value:s,norm:i,indices:a})}return r}}function jt(t,e,n){var r;let s;if(t instanceof Nt&&!n)return t.fuse.search(e).map((t=>t.item));s=t instanceof Nt?null!==(r=t.commands)&&void 0!==r?r:[]:"cmd"===t.type&&t.children?t.children:[];const i=(t,e=[])=>{let r=[];for(let s of t)e.push(s),n?r.push(new Ft(Object.assign(Object.assign({},s),{path:[...e]}))):r.push(s),"cmd"===s.type&&s.children&&(r=r.concat(i(s.children,e))),e.pop();return r};let o=i(s);return new Ot(o,{keys:["name","description"]}).search(e).map((t=>t.item))}Ot.version="6.4.6",Ot.createIndex=ot,Ot.parseIndex=function(t,{getFn:e=rt.getFn}={}){const{keys:n,records:r}=t,s=new it({getFn:e});return s.setKeys(n),s.setIndexRecords(r),s},Ot.config=rt,Ot.parseQuery=St,function(...t){bt.push(...t)}(Mt);class Ft{constructor(t,e=!0){e&&(t=P(t)),Object.keys(t).forEach((e=>{this[e]=t[e]}))}}class Rt{constructor(t){this.name=t.name,this.description=t.description,this.type=t.type,this.mode=t.mode,this.required=t.required,this.value=t.value}}class Nt{constructor(){this.parse=K,this.match=T,this.run=W,this.search=jt,this.parseMatch=(t,e)=>T(null!=e?e:this,K(t)),this.commands=[],this.fuse=new Ot(this.commands),this.updateFuse=()=>{const t=e=>{let n=[];for(let r of e)n.push(r),"cmd"===r.type&&r.children&&(n=n.concat(t(r.children)));return n};let e=t(this.commands);this.fuse=new Ot(e,{keys:["name","description"]})}}load(...t){for(let e of t)this.commands.push(new Ft(e));this.updateFuse()}loadURL(t){return z(this,void 0,void 0,(function*(){const e=(yield import(t)).default;if(Array.isArray(e))for(let t of e)this.commands.push(t);else this.commands.push(e);this.updateFuse()}))}getLastCommand(t){for(let e=t.length-1;e>=0;e--)if(t[e]instanceof Ft)return t[e]}stateful(t){var e;return void 0===t&&(t=new Ft({name:"h",type:"cmd",children:null!==(e=this.commands)&&void 0!==e?e:[]})),{parse:K,match:e=>T(t,e),run:e=>W(t,e),search:(e,n)=>jt(t,e,n)}}}function qt(t,e,n){const r=t.slice();return r[11]=e[n],r[13]=n,r}function zt(t,e,n){const r=t.slice();return r[14]=e[n],r}function Pt(t){let e,n,r=t[11].name+"";return{c(){e=p("span"),n=g(r),x(e,"class","item-name")},m(t,r){u(t,e,r),l(e,n)},p(t,e){1&e&&r!==(r=t[11].name+"")&&v(n,r)},d(t){t&&d(e)}}}function Bt(t){let e,n=t[11].path,r=[];for(let e=0;e<n.length;e+=1)r[e]=Kt(zt(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=g("")},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);u(t,e,n)},p(t,s){if(1&s){let i;for(n=t[11].path,i=0;i<n.length;i+=1){const o=zt(t,n,i);r[i]?r[i].p(o,s):(r[i]=Kt(o),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){f(r,t),t&&d(e)}}}function Kt(t){let e,n,r=t[14].name+"";return{c(){e=p("span"),n=g(r),x(e,"class","item-name")},m(t,r){u(t,e,r),l(e,n)},p(t,e){1&e&&r!==(r=t[14].name+"")&&v(n,r)},d(t){t&&d(e)}}}function Tt(t){let e,n,r,s,i,o,c,a,h=(t[11].description??"")+"";function f(t,e){return t[11].path&&t[11].path.length>0?Bt:Pt}let M=f(t),b=M(t);function _(){return t[7](t[13])}return{c(){e=p("div"),b.c(),n=m(),r=p("span"),s=g(h),i=m(),x(r,"class","item-description"),x(e,"class",o="dropdown-item "+(t[13]===t[1]?"selected":""))},m(t,o){u(t,e,o),b.m(e,null),l(e,n),l(e,r),l(r,s),l(e,i),c||(a=y(e,"mouseover",_),c=!0)},p(r,i){M===(M=f(t=r))&&b?b.p(t,i):(b.d(1),b=M(t),b&&(b.c(),b.m(e,n))),1&i&&h!==(h=(t[11].description??"")+"")&&v(s,h),2&i&&o!==(o="dropdown-item "+(t[13]===t[1]?"selected":""))&&x(e,"class",o)},d(t){t&&d(e),b.d(),c=!1,a()}}}function Wt(t){let n,r,i,o,c,a,h,g,v,M,b,_,w,$=t[0],k=[];for(let e=0;e<$.length;e+=1)k[e]=Tt(qt(t,$,e));return{c(){n=p("div"),r=p("div"),i=p("div"),o=p("img"),a=m(),h=p("input"),g=m(),v=p("div");for(let t=0;t<k.length;t+=1)k[t].c();var t,s,l;M=m(),b=p("div"),this.c=e,o.src!==(c="fav.png")&&x(o,"src","fav.png"),x(o,"alt","icon"),x(o,"class","icon"),t="width",s="1.6rem",o.style.setProperty(t,s,l?"important":""),x(h,"type","text"),x(h,"placeholder","Enter a command"),x(i,"class","input"),x(v,"class","dropdown"),x(b,"class","form"),x(r,"class","cli"),x(n,"id","clui-fragment")},m(e,s){u(e,n,s),l(n,r),l(r,i),l(i,o),l(i,a),l(i,h),l(r,g),l(r,v);for(let t=0;t<k.length;t+=1)k[t].m(v,null);l(r,M),l(r,b),_||(w=[y(h,"keyup",t[3]),y(h,"focus",t[5]),y(h,"blur",t[6])],_=!0)},p(t,[e]){if(3&e){let n;for($=t[0],n=0;n<$.length;n+=1){const r=qt(t,$,n);k[n]?k[n].p(r,e):(k[n]=Tt(r),k[n].c(),k[n].m(v,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=$.length}},i:e,o:e,d(t){t&&d(n),f(k,t),_=!1,s(w)}}}function Ht(t,e,n){const r=new Nt;window.clui=r,r.load(...q);let s=[],i=[],o=[],c=0,a=!1;const h=t=>i=t.filter((t=>void 0===t.unknown||!1===t.unknown));return t.$$.update=()=>{16&t.$$.dirty&&h(s)},[o,c,a,t=>{var e;const c=null===(e=t.target)||void 0===e?void 0:e.value;c?(n(4,s=r.parseMatch(c)),h(s),n(0,o=r.search(i[0]&&i[0]instanceof Ft?i[0]:r,c,!0))):n(0,o=a?r.commands:[])},s,()=>n(2,a=!0),()=>n(2,a=!1),t=>n(1,c=t)]}class Jt extends N{constructor(t){super(),this.shadowRoot.innerHTML="<style>#clui-fragment,#clui-fragment *{box-sizing:border-box}#clui-fragment{--dark:hsl(225, 32%, 13%);--darker:hsl(225, 35%, 9%);--darkest:hsl(225, 38%, 6%);--light:hsl(225, 35%, 36%);--medium:hsl(225, 31%, 18%);--text-light:hsl(225, 54%, 89%);--text-medium:hsl(225, 33%, 64%);background-color:var(--darkest);color:var(--text-medium);font-size:1.3rem;font-family:Calibri, sans-serif}#clui-fragment{display:flex;flex-direction:column;align-items:center;margin:0 auto}.input{position:relative;display:flex;align-items:center;border:2px solid var(--medium);border-radius:3px 3px 0 0;background-color:var(--dark)}.input>input{position:relative;z-index:1;flex:1;padding:0.6rem 0.4rem;outline:none;border:none;background-color:transparent;color:var(--text-light);font-size:inherit;font-family:Calibri, sans-serif}.dropdown{overflow-y:auto;min-width:40vw;max-width:60vw;max-height:40vh;border-radius:0 0 3px 3px;background-color:var(--darker)}.dropdown-item{position:relative;z-index:1;padding:0.3rem 0.6rem;padding-left:1.6rem;border-radius:3px;background-color:var(--darker)}.dropdown-item.selected{outline:2px solid var(--light);outline-offset:-2px;background-color:var(--light);background-color:var(--medium);color:var(--text-light);cursor:pointer}.item-name{margin-right:0.3rem;padding:0.3rem 0.5rem;border:2px solid var(--light);border-radius:3px;display:inline-block}.selected>.item-name{background-color:var(--light)}</style>",R(this,{target:this.shadowRoot,props:M(this.attributes),customElement:!0},Ht,Wt,o,{}),t&&t.target&&u(t.target,this,t.anchor)}}return customElements.define("clui-main",Jt),t.Clui=Jt,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=clui.js.map
